<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Geocoding</title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<input id="name" type="text" placeholder="地名・駅名などを入力"/>
<script>
/*$(function(){
  //検索したい名前を指定
  var name = $("#name").val();
  var rep = 'https://maps.googleapis.com/maps/api/geocode/json?address='+name+'&sensor=false';
  if(name != ''){
    $.ajax({
        type:'GET',
        url: rep,
        dataType: 'json',
      success: function (data) {
        var res;
        console.log(name+'で検索');
        console.log(data);
        console.log(data.results[0].geometry.location);
        console.log(data.results[0].geometry.location.lat);
        console.log(data.results[0].geometry.location.lng);
        console.log(data.results[0].formatted_address);
      }
    });
  }

});
*/
searchArea = function(){
  var name = $("#name").val();
  var rep = 'https://maps.googleapis.com/maps/api/geocode/json?address='+name+'&sensor=false';
  if(name != ''){
    $.ajax({
        type:'GET',
        url: rep,
        dataType: 'json',
      success: function (data) {
        var res;
        console.log(name+'で検索');
        console.log(data);
        console.log(data.results[0].geometry.location);
        console.log(data.results[0].geometry.location.lat);
        console.log(data.results[0].geometry.location.lng);
        console.log(data.results[0].formatted_address);
      }
    });
  }
}

$("#name").on('input',searchArea);

</script>
</body>
</html>
