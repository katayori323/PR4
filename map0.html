<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>html, body, #map { width: 100%; height: 100%; }</style>
    <title></title>
     <!-- BootstrapのCSS読み込み -->
   <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery読み込み -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <!-- BootstrapのJS読み込み -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <!-- google map のAPI-->

  </head>
  <body>
    <script>

      //店の座標いれてね
    var shoplat = "34.9791774362";
    var shoplog = "135.7423078657";

    //androidかiPhoneを調べる変数
    var isiPhone = 0;
    var isAndroid = 0;

    //機種判別用
    var ua = navigator.userAgent.toLowerCase();
    console.log(ua);
    //iPhoneだった場合1を入れる
     isiPhone = (ua.indexOf('iphone') > -1 );
    // Androidの場合1を入れる
     isAndroid = (ua.indexOf('android') > -1);
    //位置情報を取得できるか確認する。

    //位置情報取得する場合に必要な関数。(初めに呼ばれる)
    function initMap() {
      //ユーザーエージェントを調べる
      // Geolocation APIに対応しているかどうか
      if (navigator.geolocation) {
        alert("この端末では位置情報が取得できます");
      // Geolocation APIに対応していない
      } else {
      alert("この端末では位置情報が取得できません");
      }

      function cmanGetOk(argPos){
        lat = argPos.coords.latitude;          // 緯度
        log = argPos.coords.longitude;         // 経度

    }

    //現在地を取得するための処理
    navigator.geolocation.getCurrentPosition(cmanGetOk)
    }


    $(function () {
      //ボタン押されたとき
      $('.js--apply').click(function (e) {
      if (isAndroid > 0){
        //google map起動(現在地から目的地までのルート)
        location.href = 'https://maps.google.com/maps?daddr='+shoplat+','+shoplog+'&saddr='+lat+','+log;
      } else{
        //アップルのマップを起動(現在地から目的地までのルート)
        location.href = 'http://maps.apple.com/maps?daddr=' + shoplat + ',' + shoplog+'&saddr='+lat+','+log;
      }

        });
    });

    </script>

    <div class="container-fluid">
      <div class="test" class="container">
        <div class="row">
          <input type="button" value="ルート" class="js--apply btn btn-info" />
        </div>
      </div>
    </div>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAb3Mm8zzsqCNFTr-_LNNkQMtYKTV000PA&callback=initMap" async defer></script>
  </body>
</html>
